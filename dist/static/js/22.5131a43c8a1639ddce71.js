webpackJsonp([22],{"6k9I":function(e,t){},"uQt+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),i=a.n(r),o=a("54Nt"),l=a("nAX2"),s={name:"DataSource",data:function(){return{typeList:[],dataSourceList:[],condition:{},dialogVisible:!1,dialogVisibleEdit:!1,dataSourceForm:{},dataSourceFormEdit:{},addRules:{name:[{required:!0,message:"名称不能为空",trigger:"change"}],type:[{required:!0,message:"类型不能为空",trigger:"change"}],url:[{required:!0,message:"url不能为空",trigger:"change"}],port:[{required:!0,message:"端口号不能为空",trigger:"change"}],user:[{required:!0,message:"用户名不能为空",trigger:"change"}],password:[{required:!0,message:"密码不能为空",trigger:"change"}],tables:[{required:!0,message:"table列表不能为空",trigger:"change"}]},editRules:{name:[{required:!0,message:"名称不能为空",trigger:"change"}],type:[{required:!0,message:"类型不能为空",trigger:"change"}],url:[{required:!0,message:"url不能为空",trigger:"change"}],port:[{required:!0,message:"端口号不能为空",trigger:"change"}],user:[{required:!0,message:"用户名不能为空",trigger:"change"}],password:[{required:!0,message:"密码不能为空",trigger:"change"}],tables:[{required:!0,message:"table列表不能为空",trigger:"change"}]}}},methods:{deleteDataSource:function(e){var t=this,a=o.a.delete,r={id:e};a.param=i()({},a.param,r),Object(l.a)(this.GLOBAL.BASE_URL,a).then(function(e){"1000"===e.code?(a.param=r,t.$message.success("删除成功！"),t.getList()):t.$message.error(e.msg)})},getDetail:function(e){var t=this,a=o.a.detail,r={id:e};a.param=i()({},a.param,r),Object(l.a)(this.GLOBAL.BASE_URL,a).then(function(e){t.dataSourceFormEdit=e.data,a.param=r}),this.dialogVisibleEdit=!0},cardContent:function(e,t){var a="";return"name"===e?a="名称:  "+t:"type"===e?a="类型:  "+t:"url"===e?a="url:  "+t:"port"===e?a="port:  "+t:"user"===e?a="用户名:  "+t:"password"===e?a="密码:  "+t:"tables"===e&&(a="table列表:  "+t),a},getList:function(){var e=this,t=o.a.list;t.param=i()({},t.param,this.condition),Object(l.a)(this.GLOBAL.BASE_URL,t).then(function(a){e.dataSourceList=a.data.dataSourceList,t.param=o.a.list.param})},closeAddDialog:function(){this.dialogVisible=!1,this.dataSourceForm={},this.$refs.dataSourceForm.resetFields()},closeEditDialog:function(){this.dialogVisibleEdit=!1,this.dataSourceFormEdit={},this.$refs.dataSourceFormEdit.resetFields()},addDataSource:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请填写必填项！"),!1;var a=o.a.add;a.param=i()({},a.param,t.dataSourceForm),Object(l.a)(t.GLOBAL.BASE_URL,a).then(function(e){"1000"===e.code?(t.closeAddDialog(),a.param=o.a.add.param,t.$message.success("新增成功！"),t.getList()):t.$message.error(e.msg)})})},editDataSource:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请填写必填项！"),!1;var a=o.a.update;a.param=i()({},a.param,t.dataSourceFormEdit),Object(l.a)(t.GLOBAL.BASE_URL,a).then(function(e){"1000"===e.code?(t.closeEditDialog(),a.param=o.a.update.param,t.$message.success("更新成功！"),t.getList()):t.$message.error(e.msg)})})},getTypeList:function(){var e=this,t=o.a.typeList;Object(l.a)(this.GLOBAL.BASE_URL,t).then(function(t){e.typeList=t.data.typeList})},init:function(){this.getTypeList(),this.getList()}},beforeMount:function(){this.init()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.condition,inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"数据源名称:"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入数据源名称",clearable:""},model:{value:e.condition.name,callback:function(t){e.$set(e.condition,"name",t)},expression:"condition.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据源类型:"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.condition.type,callback:function(t){e.$set(e.condition,"type",t)},expression:"condition.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:e.getList}},[e._v("查询\n      ")]),e._v(" "),a("el-button",{attrs:{type:"success",round:"",size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增\n      ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},e._l(e.dataSourceList,function(t){return a("el-col",{key:t.index,attrs:{span:12}},[a("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("数据源名称:"+e._s(t.name))]),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"20px"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteDataSource(t.id)}}},[e._v("删除\n          ")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.getDetail(t.id)}}},[e._v("编辑\n          ")])],1),e._v(" "),e._l(Object.keys(t),function(r){return a("div",{key:r.index,staticClass:"text item"},[e._v("\n          "+e._s(e.cardContent(r,t[r]))+"\n        ")])})],2)],1)}),1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,"before-close":e.closeAddDialog,title:"新增",width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"dataSourceForm",attrs:{model:e.dataSourceForm,rules:e.addRules,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceForm.name,callback:function(t){e.$set(e.dataSourceForm,"name",t)},expression:"dataSourceForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.dataSourceForm.type,callback:function(t){e.$set(e.dataSourceForm,"type",t)},expression:"dataSourceForm.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"url:",prop:"url"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceForm.url,callback:function(t){e.$set(e.dataSourceForm,"url",t)},expression:"dataSourceForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"端口号:",prop:"port"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceForm.port,callback:function(t){e.$set(e.dataSourceForm,"port",t)},expression:"dataSourceForm.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名:",prop:"user"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceForm.user,callback:function(t){e.$set(e.dataSourceForm,"user",t)},expression:"dataSourceForm.user"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码:",prop:"password"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceForm.password,callback:function(t){e.$set(e.dataSourceForm,"password",t)},expression:"dataSourceForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"table列表:",prop:"tables"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceForm.tables,callback:function(t){e.$set(e.dataSourceForm,"tables",t)},expression:"dataSourceForm.tables"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.closeAddDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addDataSource("dataSourceForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisibleEdit,"before-close":e.closeEditDialog,title:"编辑",width:"40%"},on:{"update:visible":function(t){e.dialogVisibleEdit=t}}},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"dataSourceFormEdit",attrs:{model:e.dataSourceFormEdit,rules:e.editRules,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceFormEdit.name,callback:function(t){e.$set(e.dataSourceFormEdit,"name",t)},expression:"dataSourceFormEdit.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.dataSourceFormEdit.type,callback:function(t){e.$set(e.dataSourceFormEdit,"type",t)},expression:"dataSourceFormEdit.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"url:",prop:"url"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceFormEdit.url,callback:function(t){e.$set(e.dataSourceFormEdit,"url",t)},expression:"dataSourceFormEdit.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"端口号:",prop:"port"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceFormEdit.port,callback:function(t){e.$set(e.dataSourceFormEdit,"port",t)},expression:"dataSourceFormEdit.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名:",prop:"user"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceFormEdit.user,callback:function(t){e.$set(e.dataSourceFormEdit,"user",t)},expression:"dataSourceFormEdit.user"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码:",prop:"password"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceFormEdit.password,callback:function(t){e.$set(e.dataSourceFormEdit,"password",t)},expression:"dataSourceFormEdit.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"table列表:",prop:"tables"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.dataSourceFormEdit.tables,callback:function(t){e.$set(e.dataSourceFormEdit,"tables",t)},expression:"dataSourceFormEdit.tables"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.closeEditDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.editDataSource("dataSourceFormEdit")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,n,!1,function(e){a("6k9I")},"data-v-0d848ba6",null);t.default=c.exports}});
//# sourceMappingURL=22.5131a43c8a1639ddce71.js.map