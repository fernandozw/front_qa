webpackJsonp([3],{"/c4k":function(e,t){},"/f19":function(e,t){},"0KZw":function(e,t){},"0vYM":function(e,t){},"2J/l":function(e,t){},"6DWH":function(e,t){},"6rZZ":function(e,t){},AysZ:function(e,t){},BLVX:function(e,t){},CfyH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("fZjL"),i=a.n(l),s=a("mvHQ"),n=a.n(s),r={name:"RequestDialog",props:{requestId:{type:Number,default:null},type:{type:Number,default:1},visible:{type:Boolean,default:!0}},data:function(){return{dialogVisible:!1,requestDetail:{id:"",name:"",url:"",method:"",headers:"",variables:0,params:"",data:"{}",extract:"{}",setup_hook:"",teardown_hook:"",validators:""},methodList:[]}},computed:{dialogTitle:function(){return 2===this.type?"编辑（ID："+this.requestId+"）":3===this.type?"复制":"新增"},btnText:function(){return 3===this.type?"复 制":"保 存"},typeText:function(){return 2===this.type?"编辑":3===this.type?"复制":"新增"}},created:function(){this.dialogVisible=this.visible,1===this.type?this.getConditions():2!==this.type&&3!==this.type||this.init()},methods:{init:function(){var e=this,t=String.format("{0}/request/requestInfo?id={1}",this.GLOBAL.HTTPRUNNER_URL,this.requestId);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.requestDetail=t.data.detail,3===e.type&&(e.requestDetail.id=null),e.getConditions(),t}).catch(function(e){return e})},saveCase:function(){var e=this;if(this.isEmpty(this.caseDetail.url_id)||this.isEmpty(this.caseDetail.case_name)||this.isEmpty(this.caseDetail.case_type)||this.isEmpty(this.caseDetail.auto)||this.isEmpty(this.caseDetail.request_type)||this.isEmpty(this.caseDetail.project_id)||this.isEmpty(this.caseDetail.business_id)||this.isEmpty(this.caseDetail.host_id)||this.isEmpty(this.caseDetail.create_person)||this.isEmpty(this.caseDetail.version_id))this.Message.error("警告:请填写必填项!");else if(this.GLOBAL.checkJson(this.caseDetail.param)&&this.GLOBAL.checkJson(this.caseDetail.header)){this.caseDetail.pre_scene=this.preSceneS.join(",");var t=String.format(this.caseDetail.id?"{0}/caseInterface/editCase":"{0}/caseInterface/addCase",this.GLOBAL.MONITOR_URL);this.axios.post(t,n()(this.caseDetail),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){return"200"===t.data.code?(e.Message.success(t.data.msg),e.$emit("listenToChildEvent",!0)):e.Message.error(t.data.msg),t}).catch(function(e){return e})}else this.Message.error("请求头部、请求参数必须为JSON格式")},close:function(){this.$emit("listenToChildEvent",!1)},getConditions:function(){var e=this;this.methodList=[];var t=String.format("{0}/condition/requestTypeList",this.GLOBAL.HTTPRUNNER_URL);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.methodList=t.data.data,t}).catch(function(e){return e})},isEmpty:function(e){return void 0===e||""===e}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"request-dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("请求名称: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{placeholder:"必填项:请输入内容",clearable:""},model:{value:e.requestDetail.name,callback:function(t){e.$set(e.requestDetail,"name",t)},expression:"requestDetail.name"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",[e._v("请求地址: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{placeholder:"必填项:请输入内容",clearable:""},model:{value:e.requestDetail.url,callback:function(t){e.$set(e.requestDetail,"url",t)},expression:"requestDetail.url"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("请求头部: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.requestDetail.headers,callback:function(t){e.$set(e.requestDetail,"headers",t)},expression:"requestDetail.headers"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",[e._v("step的子变量: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.requestDetail.variables,callback:function(t){e.$set(e.requestDetail,"variables",t)},expression:"requestDetail.variables"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("params参数: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:1}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.requestDetail.params,callback:function(t){e.$set(e.requestDetail,"params",t)},expression:"requestDetail.params"}})],1),e._v(" "),a("el-col",{attrs:{span:3,push:1}},[a("span",[e._v("请求体: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.requestDetail.data,callback:function(t){e.$set(e.requestDetail,"data",t)},expression:"requestDetail.data"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("导出参数值: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:1}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.requestDetail.extract,callback:function(t){e.$set(e.requestDetail,"extract",t)},expression:"requestDetail.extract"}})],1),e._v(" "),a("el-col",{attrs:{span:3,push:1}},[a("span",[e._v("setup钩子函数:")])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",clearable:""},model:{value:e.requestDetail.setup_hook,callback:function(t){e.$set(e.requestDetail,"setup_hook",t)},expression:"requestDetail.setup_hook"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("执行完钩子函数:")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:1}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",clearable:""},model:{value:e.requestDetail.teardown_hook,callback:function(t){e.$set(e.requestDetail,"teardown_hook",t)},expression:"requestDetail.teardown_hook"}})],1),e._v(" "),a("el-col",{attrs:{span:3,push:1}},[a("span",[e._v("断言集:")])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",clearable:""},model:{value:e.requestDetail.validators,callback:function(t){e.$set(e.requestDetail,"validators",t)},expression:"requestDetail.validators"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("请求方法: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-select",{attrs:{placeholder:"必填项:请选择",clearable:"",filterable:""},model:{value:e.requestDetail.method,callback:function(t){e.$set(e.requestDetail,"method",t)},expression:"requestDetail.method"}},e._l(e.methodList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.close}},[e._v("\n      "+e._s(e.btnText)+"\n    ")])],1)])},staticRenderFns:[]};var c={name:"RequestTable",components:{RequestDialog:a("VU/8")(r,o,!1,function(e){a("BLVX")},"data-v-13d1a426",null).exports},props:{tabData:null,tabHeader:null},data:function(){return{dialogVisible:!1,requestId:null,requestDialogType:2,loading:!1}},methods:{tableRowClassName:function(e){e.row;return e.rowIndex%2==0?"warning-row":"success-row"},detailClick:function(e){this.requestId=e,this.requestDialogType=2,this.dialogVisible=!0},callbackFunc:function(e){this.dialogVisible=!1,e&&this.$emit("getRequestList")}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"-10px"},attrs:{"element-loading-text":"拼命执行中,请稍等,若一直无响应,30秒后自动关闭～～～","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.tabData,border:"",size:"mini","row-class-name":e.tableRowClassName,width:"100%"}},[e._l(e.tabHeader,function(t,l){return["action"===t.prop?a("el-table-column",{key:l,attrs:{label:t.label,align:"center","show-overflow-tooltip":"",width:"300px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",disabled:!0},on:{click:function(a){return e.executeCase(e.tabData[t.$index].id)}}},[e._v("执行\n          ")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"当前只做详情展示功能！",placement:"top"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.detailClick(e.tabData[t.$index].id)}}},[e._v("编辑\n            ")])],1),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",disabled:!0},on:{click:function(a){return e.deleteCase(e.tabData[t.$index].id)}}},[e._v("删除\n          ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",disabled:!0},on:{click:function(a){return e.copyCase(e.tabData[t.$index].id)}}},[e._v("复制\n          ")])]}}],null,!0)}):"id"===t.prop?a("el-table-column",{key:l,attrs:{prop:t.prop,label:t.label,align:"center","show-overflow-tooltip":"",fixed:"left",width:"120px"}}):a("el-table-column",{key:l,attrs:{prop:t.prop,label:t.label,align:"center","show-overflow-tooltip":""}})]})],2),e._v(" "),e.dialogVisible?a("request-dialog",{attrs:{visible:e.dialogVisible,"request-id":e.requestId,type:e.requestDialogType},on:{listenToChildEvent:e.callbackFunc}}):e._e()],1)},staticRenderFns:[]};var d={name:"RequestList",components:{RequestTable:a("VU/8")(c,u,!1,function(e){a("/f19")},"data-v-b6f2008e",null).exports},props:{requestIdFromList:""},data:function(){return{requestId:"",name:"",url:"",method:"",total:0,pageSize:10,currentPage:1,dialogVisible:!1,methodList:[],tableData:[],tableHeader:[],timeRange:[]}},methods:{isEmpty:function(e){return void 0===e||""===e},reset:function(){this.initConditions(),this.getConditions(),this.getRequestList()},initConditions:function(){this.requestId="",this.name="",this.url="",this.method="",this.timeRange=[],this.pageSize=10,this.currentPage=1},getConditions:function(){var e=this;this.methodList=[];var t=String.format("{0}/condition/requestTypeList",this.GLOBAL.HTTPRUNNER_URL);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.methodList=t.data.data,t}).catch(function(e){return e})},getRequestList:function(){var e=this,t="",a="";null!=this.timeRange&&this.timeRange.length>0&&(t=this.timeRange[0],a=this.timeRange[1]);var l=String.format("{0}/request/requestList",this.GLOBAL.HTTPRUNNER_URL),i={id:this.requestId,name:this.name,url:this.url,method:this.method,start_time:t,end_time:a,page_index:this.currentPage};this.axios.post(l,n()(i),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){"200"!==t.data.code&&e.$message.error(t.data.msg),e.total=t.data.total;var a=t.data.requestInfo;return e.tableHeader=a.tableHeader,e.tableData=a.tableData,t}).catch(function(e){return e})},search:function(){this.currentPage=1,this.getRequestList()},init:function(){this.requestId=this.requestIdFromList,this.getConditions(),this.getRequestList()}},beforeMount:function(){this.init()}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-row",{staticStyle:{"margin-top":"-10px"},attrs:{gutter:40}},[a("el-col",{attrs:{span:2}},[a("span",[e._v("请求id")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"输入请求id",clearable:"",size:"mini"},model:{value:e.requestId,callback:function(t){e.requestId=t},expression:"requestId"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",[e._v("名   称")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入请求名称",clearable:"",size:"mini"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("el-col",{attrs:{span:3,push:1}},[a("span",[e._v("请求地址")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入请求地址",clearable:"",size:"mini"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"-10px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("请求方式")])]),e._v(" "),a("el-col",{attrs:{span:4,pull:1}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},e._l(e.methodList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:3,pull:1}},[a("span",[e._v("创建日期")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1),e._v(" "),a("el-col",{staticStyle:{float:"right"},attrs:{span:6}},[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:e.search}},[e._v("查询\n        ")]),e._v(" "),a("el-button",{attrs:{type:"success ",round:"",disabled:!0,size:"mini"}},[e._v("新增\n        ")]),e._v(" "),a("el-button",{attrs:{type:"info",round:"",size:"mini"},on:{click:e.reset}},[e._v("重置\n        ")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("request-table",{attrs:{tabData:e.tableData,tabHeader:e.tableHeader}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,slot, prev, pager, next, jumper",total:e.total,size:"mini"},on:{"current-change":e.getRequestList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}},[a("span",[e._v(e._s(e.pageSize)+"条/页")])])],1)},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("NM1Q")},"data-v-17356583",null).exports,h={name:"StepDialog",props:{stepId:{type:Number,default:null},type:{type:Number,default:1},visible:{type:Boolean,default:!0}},data:function(){return{dialogVisible:!1,stepDetail:{id:"",module:"",step_id:"",name:"",config:"",steps:"",desc:""},moduleList:[]}},computed:{dialogTitle:function(){return 2===this.type?"编辑（ID："+this.stepId+"）":3===this.type?"复制":"新增"},btnText:function(){return 3===this.type?"复 制":"保 存"},typeText:function(){return 2===this.type?"编辑":3===this.type?"复制":"新增"}},created:function(){this.dialogVisible=this.visible,1===this.type?this.getConditions():2!==this.type&&3!==this.type||this.init()},methods:{init:function(){var e=this,t=String.format("{0}/step/stepInfo?id={1}",this.GLOBAL.HTTPRUNNER_URL,this.stepId);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.stepDetail=t.data.detail,3===e.type&&(e.stepDetail.id=null),e.getConditions(),t}).catch(function(e){return e})},close:function(){this.$emit("listenToChildEvent",!1)},getConditions:function(){var e=this;this.methodList=[];var t=String.format("{0}/condition/moduleList",this.GLOBAL.HTTPRUNNER_URL);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.moduleList=t.data.module_list,t}).catch(function(e){return e})},isEmpty:function(e){return void 0===e||""===e}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"step-dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("所属模块: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-select",{attrs:{filterable:"",placeholder:"必选项,请选择",clearable:"",size:"mini"},model:{value:e.stepDetail.module,callback:function(t){e.$set(e.stepDetail,"module",t)},expression:"stepDetail.module"}},e._l(e.moduleList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",[e._v("步骤id: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{placeholder:"必填项:请输入内容",clearable:""},model:{value:e.stepDetail.step_id,callback:function(t){e.$set(e.stepDetail,"step_id",t)},expression:"stepDetail.step_id"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("步骤名称: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.stepDetail.name,callback:function(t){e.$set(e.stepDetail,"name",t)},expression:"stepDetail.name"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",[e._v("配置内容: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.stepDetail.config,callback:function(t){e.$set(e.stepDetail,"config",t)},expression:"stepDetail.config"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("关联步骤: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:1}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.stepDetail.steps,callback:function(t){e.$set(e.stepDetail,"steps",t)},expression:"stepDetail.steps"}})],1),e._v(" "),a("el-col",{attrs:{span:3,push:1}},[a("span",[e._v("描述信息: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.stepDetail.desc,callback:function(t){e.$set(e.stepDetail,"desc",t)},expression:"stepDetail.desc"}})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.close}},[e._v("\n      "+e._s(e.btnText)+"\n    ")])],1)])},staticRenderFns:[]};var b={name:"StepTable",components:{StepDialog:a("VU/8")(h,v,!1,function(e){a("AysZ")},"data-v-a9866b24",null).exports},props:{tabData:null,tabHeader:null},data:function(){return{dialogVisible:!1,stepId:null,stepDialogType:2,loading:!1}},methods:{initStepRef:function(e){return String.format("/httpRunnerTest/httpRunner?activeName=stepModule&id={0}",e)},initRequestRef:function(e){return String.format("/httpRunnerTest/httpRunner?activeName=requestModule&id={0}",e)},extractNumbers:function(e){for(var t={},a=[],l=[],i=e.split(","),s=0;s<i.length;s++)isNaN(Number(i[s]))?l.push(i[s]):a.push(i[s]);return a.length===i.length?(t.type=1,t.request=e,t.step=""):l.length===i.length?(t.type=2,t.step=e,t.request=""):(t.type=3,t.step=l.join(","),t.request=a.join(",")),t},tableRowClassName:function(e){e.row;return e.rowIndex%2==0?"warning-row":"success-row"},detailClick:function(e){this.stepId=e,this.stepDialogType=2,this.dialogVisible=!0},callbackFunc:function(e){this.dialogVisible=!1,e&&this.$emit("getStepList")}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"-10px"},attrs:{"element-loading-text":"拼命执行中,请稍等,若一直无响应,30秒后自动关闭～～～","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.tabData,border:"",size:"mini","row-class-name":e.tableRowClassName,width:"100%"}},[e._l(e.tabHeader,function(t,l){return["action"===t.prop?a("el-table-column",{key:l.id,attrs:{label:t.label,align:"center","show-overflow-tooltip":"",width:"300px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",disabled:!0},on:{click:function(a){return e.executeCase(e.tabData[t.$index].id)}}},[e._v("执行\n          ")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"当前只做详情展示功能！",placement:"top"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.detailClick(e.tabData[t.$index].id)}}},[e._v("编辑\n            ")])],1),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",disabled:!0},on:{click:function(a){return e.deleteCase(e.tabData[t.$index].id)}}},[e._v("删除\n          ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",disabled:!0},on:{click:function(a){return e.copyCase(e.tabData[t.$index].id)}}},[e._v("复制\n          ")])]}}],null,!0)}):"id"===t.prop?a("el-table-column",{key:l.id,attrs:{prop:t.prop,label:t.label,align:"center","show-overflow-tooltip":"",fixed:"left",width:"120px"}}):"steps"===t.prop?a("el-table-column",{key:l.id,attrs:{label:t.label,align:"center","show-overflow-tooltip":"",width:"350px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===e.extractNumbers(e.tabData[t.$index].steps).type?a("span",[a("a",{attrs:{href:e.initStepRef(e.tabData[t.$index].steps),target:"_blank"}},[e._v("步骤")])]):1===e.extractNumbers(e.tabData[t.$index].steps).type?a("span",[a("a",{attrs:{href:e.initRequestRef(e.tabData[t.$index].steps),target:"_blank"}},[e._v("请求")])]):a("span",[a("a",{attrs:{href:e.initRequestRef(e.extractNumbers(e.tabData[t.$index].steps).request),target:"_blank"}},[e._v("请求")]),e._v(" "),a("a",{attrs:{href:e.initStepRef(e.extractNumbers(e.tabData[t.$index].steps).step),target:"_blank"}},[e._v("步骤")])]),e._v(" "),a("span",[e._v(" "+e._s(e.tabData[t.$index].steps))])]}}],null,!0)}):a("el-table-column",{key:l.id,attrs:{prop:t.prop,label:t.label,align:"center","show-overflow-tooltip":"",width:"200px"}})]})],2),e._v(" "),e.dialogVisible?a("step-dialog",{attrs:{visible:e.dialogVisible,"step-id":e.stepId,type:e.stepDialogType},on:{listenToChildEvent:e.callbackFunc}}):e._e()],1)},staticRenderFns:[]};var g={name:"StepList",components:{StepTable:a("VU/8")(b,f,!1,function(e){a("N0aE")},"data-v-482961d0",null).exports},props:{stepIdFromList:""},data:function(){return{module:"",stepId:"",name:"",desc:"",total:0,pageSize:10,currentPage:1,dialogVisible:!1,moduleList:[],tableData:[],tableHeader:[],timeRange:[]}},methods:{isEmpty:function(e){return void 0===e||""===e},reset:function(){this.initConditions(),this.getConditions(),this.getStepList()},initConditions:function(){this.stepId="",this.name="",this.desc="",this.module="",this.timeRange=[],this.pageSize=10,this.currentPage=1},getConditions:function(){var e=this;this.methodList=[];var t=String.format("{0}/condition/moduleList",this.GLOBAL.HTTPRUNNER_URL);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.moduleList=t.data.module_list,t}).catch(function(e){return e})},getStepList:function(){var e=this,t="",a="";null!=this.timeRange&&this.timeRange.length>0&&(t=this.timeRange[0],a=this.timeRange[1]);var l=String.format("{0}/step/stepList",this.GLOBAL.HTTPRUNNER_URL),i={step_id:this.stepId,name:this.name,module:this.module,desc:this.desc,start_time:t,end_time:a,page_index:this.currentPage};this.axios.post(l,n()(i),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){"200"!==t.data.code&&e.$message.error(t.data.msg),e.total=t.data.total;var a=t.data.stepInfo;return e.tableHeader=a.tableHeader,e.tableData=a.tableData,t}).catch(function(e){return e})},search:function(){this.currentPage=1,this.getStepList()},init:function(){this.stepId=this.stepIdFromList,this.getConditions(),this.getStepList()}},beforeMount:function(){this.init()}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-row",{staticStyle:{"margin-top":"-10px"},attrs:{gutter:40}},[a("el-col",{attrs:{span:2}},[a("span",[e._v("步骤id")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"输入步骤id",clearable:"",size:"mini"},model:{value:e.stepId,callback:function(t){e.stepId=t},expression:"stepId"}})],1),e._v(" "),a("el-col",{attrs:{span:3,push:1}},[a("span",[e._v("步骤名称")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"输入步骤名称",clearable:"",size:"mini"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",[e._v("模块名称")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.module,callback:function(t){e.module=t},expression:"module"}},e._l(e.moduleList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"-10px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("描述信息")])]),e._v(" "),a("el-col",{attrs:{span:4,pull:1}},[a("el-input",{attrs:{placeholder:"输入描述信息",clearable:"",size:"mini"},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}})],1),e._v(" "),a("el-col",{attrs:{span:3,pull:1}},[a("span",[e._v("创建日期")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1),e._v(" "),a("el-col",{staticStyle:{float:"right"},attrs:{span:6}},[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:e.search}},[e._v("查询\n        ")]),e._v(" "),a("el-button",{attrs:{type:"success ",round:"",disabled:!0,size:"mini"}},[e._v("新增\n        ")]),e._v(" "),a("el-button",{attrs:{type:"info",round:"",size:"mini"},on:{click:e.reset}},[e._v("重置\n        ")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("step-table",{attrs:{tabData:e.tableData,tabHeader:e.tableHeader}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,slot, prev, pager, next, jumper",total:e.total,size:"mini"},on:{"current-change":e.getStepList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}},[a("span",[e._v(e._s(e.pageSize)+"条/页")])])],1)},staticRenderFns:[]};var x=a("VU/8")(g,_,!1,function(e){a("6DWH")},"data-v-732ba378",null).exports,y={name:"TestCaseDialog",props:{caseId:{type:Number,default:null},type:{type:Number,default:1},visible:{type:Boolean,default:!0}},data:function(){return{dialogVisible:!1,caseDetail:{id:"",module:"",step_id:"",parameters:"",level:"",label:"",variables:0},moduleList:[],levelList:[]}},computed:{dialogTitle:function(){return 2===this.type?"编辑（ID："+this.caseId+"）":3===this.type?"复制":"新增"},btnText:function(){return 3===this.type?"复 制":"保 存"},typeText:function(){return 2===this.type?"编辑":3===this.type?"复制":"新增"}},created:function(){this.dialogVisible=this.visible,1===this.type?this.getConditions():2!==this.type&&3!==this.type||this.init()},methods:{init:function(){var e=this,t=String.format("{0}/case/caseInfo?id={1}",this.GLOBAL.HTTPRUNNER_URL,this.caseId);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.caseDetail=t.data.detail,3===e.type&&(e.caseDetail.id=null),e.getConditions(),t}).catch(function(e){return e})},close:function(){this.$emit("listenToChildEvent",!1)},getConditions:function(){var e=this;this.moduleList=[],this.levelList=[];var t=String.format("{0}/condition/moduleList",this.GLOBAL.HTTPRUNNER_URL),a=String.format("{0}/condition/levelList",this.GLOBAL.HTTPRUNNER_URL);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.moduleList=t.data.module_list,t}).catch(function(e){return e}),this.axios.get(a).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.levelList=t.data.level_list,t}).catch(function(e){return e})},isEmpty:function(e){return void 0===e||""===e}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"testCase-dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("所属模块: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.caseDetail.module,callback:function(t){e.$set(e.caseDetail,"module",t)},expression:"caseDetail.module"}},e._l(e.moduleList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",[e._v("步骤id: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{placeholder:"必填项:请输入内容",clearable:""},model:{value:e.caseDetail.step_id,callback:function(t){e.$set(e.caseDetail,"step_id",t)},expression:"caseDetail.step_id"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("用例参数: ")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"非必填项:请输入内容",clearable:""},model:{value:e.caseDetail.parameters,callback:function(t){e.$set(e.caseDetail,"parameters",t)},expression:"caseDetail.parameters"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",[e._v("用例级别: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.caseDetail.level,callback:function(t){e.$set(e.caseDetail,"level",t)},expression:"caseDetail.level"}},e._l(e.levelList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("用例标签: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:1}},[a("el-input",{attrs:{placeholder:"必填项:请输入内容",clearable:""},model:{value:e.caseDetail.label,callback:function(t){e.$set(e.caseDetail,"label",t)},expression:"caseDetail.label"}})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.close}},[e._v("\n      "+e._s(e.btnText)+"\n    ")])],1)])},staticRenderFns:[]};var R=a("VU/8")(y,D,!1,function(e){a("2J/l")},"data-v-73289a04",null).exports,k={name:"ExecCaseDialog",props:{caseInfo:{type:Object,default:null},visible:{type:Boolean,default:!0},execType:{type:Number,default:1}},data:function(){return{dialogVisible:!1,envList:[],moduleList:[],stepIdList:[],levelList:[],execDetail:{module:"",step_id:"",env:"tests",level:"",label:"",workers:"1",inp:"",repeat:"1"}}},computed:{dialogTitle:function(){return 1===this.execType?String.format("单个执行:(用例id->{0})",this.caseInfo.id):2===this.execType?"批量执行":void 0}},created:function(){this.dialogVisible=this.visible,this.getConditions(),this.init()},methods:{isEmpty:function(e){return void 0===e||""===e},checkModule:function(){""===this.execDetail.module&&this.Message.error("请先选择所属模块!")},stepIdChange:function(){if(this.execDetail.step_id.length>1){var e=this.execDetail.step_id.indexOf("all");e>-1&&this.execDetail.step_id.splice(e,1)}},moduleOnChange:function(e){var t=this;if("change"===e&&(this.execDetail.step_id=""),""===this.execDetail.module)this.stepIdList=[];else{var a=String.format("{0}/condition/stepIdList?module={1}",this.GLOBAL.HTTPRUNNER_URL,this.execDetail.module);this.axios.get(a).then(function(e){return"200"!==e.data.code&&t.$message.error(e.data.msg),t.stepIdList=e.data.step_id_list,e}).catch(function(e){return e})}},getConditions:function(){var e=this,t=String.format("{0}/condition/envList",this.GLOBAL.HTTPRUNNER_URL),a=String.format("{0}/condition/moduleList",this.GLOBAL.HTTPRUNNER_URL),l=String.format("{0}/condition/levelList",this.GLOBAL.HTTPRUNNER_URL);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.envList=t.data.env_list.slice(1),t}).catch(function(e){return e}),this.axios.get(a).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.moduleList=t.data.module_list.slice(1),t}).catch(function(e){return e}),this.axios.get(l).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.levelList=t.data.level_list.slice(1),t}).catch(function(e){return e})},init:function(){this.execDetail.module=this.caseInfo.module,this.execDetail.level=this.caseInfo.level,this.execDetail.label=this.caseInfo.label,this.execDetail.step_id=this.caseInfo.step_id,this.moduleOnChange("init")},executeCase:function(){var e=this;if(this.isEmpty(this.execDetail.module)||this.isEmpty(this.execDetail.step_id)||this.isEmpty(this.execDetail.env)||this.isEmpty(this.execDetail.level)||this.isEmpty(this.execDetail.repeat))this.Message.error("请填写必填项!");else{var t=String.format("{0}/exec/execCases",this.GLOBAL.HTTPRUNNER_URL);this.execDetail.level=this.execDetail.level.substring(1),2===this.execType&&(this.execDetail.step_id=this.execDetail.step_id.join(",")),this.axios.post(t,n()(this.execDetail),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){return"200"===t.data.code?e.Message.success({showClose:!0,message:"执行成功,请根据序列号: "+t.data.serial_number+" 查询执行结果!",type:"success",duration:0}):e.Message.error(t.data.msg),t}).catch(function(e){return e}),this.execDetail.level="p"+this.execDetail.level,2===this.execType&&(this.execDetail.step_id=this.execDetail.step_id.split(","))}},close:function(){this.$emit("listenToChildEvent")}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"exec-dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("所属模块: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-select",{attrs:{filterable:"",placeholder:"必填项:请选择",clearable:"",disabled:1===e.execType,size:"mini"},on:{change:function(t){return e.moduleOnChange("change")}},model:{value:e.execDetail.module,callback:function(t){e.$set(e.execDetail,"module",t)},expression:"execDetail.module"}},e._l(e.moduleList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",[e._v("步骤id: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-select",{attrs:{filterable:"",placeholder:"必填项:请选择",clearable:"",multiple:1!==e.execType,disabled:1===e.execType,size:"mini"},on:{focus:e.checkModule,change:e.stepIdChange},model:{value:e.execDetail.step_id,callback:function(t){e.$set(e.execDetail,"step_id",t)},expression:"execDetail.step_id"}},e._l(e.stepIdList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"⚠️注意,当执行的步骤超过2个时,全部将会被自动剔除!",placement:"top"}},[2===e.execType?a("i",{staticClass:"el-icon-warning"}):e._e()])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("所属环境: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-select",{attrs:{filterable:"",placeholder:"必填项:请选择",clearable:"",size:"mini"},model:{value:e.execDetail.env,callback:function(t){e.$set(e.execDetail,"env",t)},expression:"execDetail.env"}},e._l(e.envList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",[e._v("优先级: "),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-select",{attrs:{filterable:"",placeholder:"必填项:请选择",clearable:"",disabled:1===e.execType,size:"mini"},model:{value:e.execDetail.level,callback:function(t){e.$set(e.execDetail,"level",t)},expression:"execDetail.level"}},e._l(e.levelList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("循环次数:"),a("span",{staticStyle:{color:"red"}},[e._v("*")])])]),e._v(" "),a("el-col",{attrs:{span:8,pull:1}},[a("el-input",{attrs:{clearable:"",placeholder:"必填项:请输入"},model:{value:e.execDetail.repeat,callback:function(t){e.$set(e.execDetail,"repeat",t)},expression:"execDetail.repeat"}})],1),e._v(" "),a("el-col",{attrs:{span:3,push:1}},[a("span",[e._v("自定义标签: ")])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{clearable:""},model:{value:e.execDetail.label,callback:function(t){e.$set(e.execDetail,"label",t)},expression:"execDetail.label"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("inp: ")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:1}},[a("el-input",{attrs:{clearable:""},model:{value:e.execDetail.inp,callback:function(t){e.$set(e.execDetail,"inp",t)},expression:"execDetail.inp"}})],1),e._v(" "),a("el-col",{attrs:{span:3,push:1}},[a("span",[e._v("workers: ")])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{clearable:""},model:{value:e.execDetail.workers,callback:function(t){e.$set(e.execDetail,"workers",t)},expression:"execDetail.workers"}})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.executeCase}},[e._v("执 行")])],1)])},staticRenderFns:[]};var w=a("VU/8")(k,L,!1,function(e){a("0KZw")},"data-v-c4a8b87a",null).exports,T={name:"TestCaseTable",components:{TestCaseDialog:R,ExecCaseDialog:w},props:{tabData:null,tabHeader:null},data:function(){return{execType:1,dialogVisible:!1,execDialogVisible:!1,caseId:null,caseDialogType:2,loading:!1,caseInfo:{}}},methods:{initRef:function(e){return String.format("/httpRunnerTest/httpRunner?activeName=stepModule&id={0}",e)},tableRowClassName:function(e){e.row;return e.rowIndex%2==0?"warning-row":"success-row"},clickExec:function(e){this.execDialogVisible=!0,this.caseInfo=e},detailClick:function(e){this.caseId=e,this.caseDialogType=2,this.dialogVisible=!0},callbackFunc:function(e){this.dialogVisible=!1,e&&this.$emit("getCaseList")},callbackFuncExec:function(){this.execDialogVisible=!1}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"-10px"},attrs:{"element-loading-text":"拼命执行中,请稍等,若一直无响应,30秒后自动关闭～～～","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.tabData,border:"",size:"mini","row-class-name":e.tableRowClassName,width:"100%"}},[e._l(e.tabHeader,function(t,l){return["action"===t.prop?a("el-table-column",{key:l.id,attrs:{label:t.label,align:"center","show-overflow-tooltip":"",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.clickExec(e.tabData[t.$index])}}},[e._v("执行\n          ")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"当前只做详情展示功能！",placement:"top"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.detailClick(e.tabData[t.$index].id)}}},[e._v("编辑\n            ")])],1),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",disabled:!0},on:{click:function(a){return e.deleteCase(e.tabData[t.$index].id)}}},[e._v("删除\n          ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",disabled:!0},on:{click:function(a){return e.copyCase(e.tabData[t.$index].id)}}},[e._v("复制\n          ")])]}}],null,!0)}):"step_id"===t.prop?a("el-table-column",{key:l.id,attrs:{label:t.label,align:"center","show-overflow-tooltip":"",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:e.initRef(e.tabData[t.$index].step_id),target:"_blank"}},[e._v(e._s(e.tabData[t.$index].step_id))])]}}],null,!0)}):"id"===t.prop?a("el-table-column",{key:l.id,attrs:{prop:t.prop,label:t.label,align:"center","show-overflow-tooltip":"",fixed:"left"}}):a("el-table-column",{key:l,attrs:{prop:t.prop,label:t.label,align:"center","show-overflow-tooltip":""}})]})],2),e._v(" "),e.dialogVisible?a("test-case-dialog",{attrs:{visible:e.dialogVisible,"case-id":e.caseId,type:e.caseDialogType},on:{listenToChildEvent:e.callbackFunc}}):e._e(),e._v(" "),e.execDialogVisible?a("exec-case-dialog",{attrs:{visible:e.execDialogVisible,"case-info":e.caseInfo,"exec-type":e.execType},on:{listenToChildEvent:e.callbackFuncExec}}):e._e()],1)},staticRenderFns:[]};var S={name:"TestCaseList",components:{TestCaseTable:a("VU/8")(T,C,!1,function(e){a("/c4k")},"data-v-4bc7967c",null).exports,ExecCaseDialog:w},data:function(){return{execDialogVisible:!1,caseInfo:{},execType:2,module:"",stepId:"",level:"",label:"",total:0,pageSize:10,currentPage:1,dialogVisible:!1,moduleList:[],levelList:[],tableData:[],tableHeader:[],timeRange:[]}},methods:{isEmpty:function(e){return void 0===e||""===e},reset:function(){this.initConditions(),this.getConditions(),this.getCaseList()},initConditions:function(){this.stepId="",this.level="",this.label="",this.module="",this.timeRange=[],this.pageSize=10,this.currentPage=1},getConditions:function(){var e=this;this.moduleList=[],this.levelList=[];var t=String.format("{0}/condition/moduleList",this.GLOBAL.HTTPRUNNER_URL),a=String.format("{0}/condition/levelList",this.GLOBAL.HTTPRUNNER_URL);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.moduleList=t.data.module_list,t}).catch(function(e){return e}),this.axios.get(a).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.levelList=t.data.level_list,t}).catch(function(e){return e})},getCaseList:function(){var e=this,t="",a="";null!=this.timeRange&&this.timeRange.length>0&&(t=this.timeRange[0],a=this.timeRange[1]);var l=String.format("{0}/case/caseList",this.GLOBAL.HTTPRUNNER_URL),i={step_id:this.stepId,level:this.level,module:this.module,label:this.label,start_time:t,end_time:a,page_index:this.currentPage};this.axios.post(l,n()(i),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){"200"!==t.data.code&&e.$message.error(t.data.msg),e.total=t.data.total;var a=t.data.caseInfo;return e.tableHeader=a.tableHeader,e.tableData=a.tableData,t}).catch(function(e){return e})},search:function(){this.currentPage=1,this.getCaseList()},init:function(){this.getConditions(),this.getCaseList()},callbackFuncExec:function(){this.execDialogVisible=!1},clickExec:function(){this.execDialogVisible=!0,this.caseInfo={module:"",step_id:"",env:"tests",level:"p0",label:"",workers:"1",inp:"",repeat:"1"}}},beforeMount:function(){this.init()}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"stepId"}},[a("el-input",{attrs:{placeholder:"输入步骤id",clearable:"",size:"mini"},model:{value:e.stepId,callback:function(t){e.stepId=t},expression:"stepId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模块名称"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.module,callback:function(t){e.module=t},expression:"module"}},e._l(e.moduleList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用例级别"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}},e._l(e.levelList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"自定义标签"}},[a("el-input",{attrs:{placeholder:"输入自定义标签",clearable:"",size:"mini"},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:e.search}},[e._v("查询\n        ")]),e._v(" "),a("el-button",{attrs:{type:"success ",round:"",disabled:!0,size:"mini"}},[e._v("新增\n        ")]),e._v(" "),a("el-button",{attrs:{type:"info",round:"",size:"mini"},on:{click:e.reset}},[e._v("重置\n        ")]),e._v(" "),a("el-button",{attrs:{type:"danger",round:"",size:"mini"},on:{click:e.clickExec}},[e._v("批量执行\n        ")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("test-case-table",{attrs:{tabData:e.tableData,tabHeader:e.tableHeader}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,slot, prev, pager, next, jumper",total:e.total,size:"mini"},on:{"current-change":e.getCaseList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}},[a("span",[e._v(e._s(e.pageSize)+"条/页")])]),e._v(" "),e.execDialogVisible?a("exec-case-dialog",{attrs:{visible:e.execDialogVisible,"case-info":e.caseInfo,"exec-type":e.execType},on:{listenToChildEvent:e.callbackFuncExec}}):e._e()],1)},staticRenderFns:[]};var $=a("VU/8")(S,N,!1,function(e){a("EXVm")},"data-v-c5de294c",null).exports,z={name:"ResultDialog",props:{resultId:{type:Number,default:null},visible:{type:Boolean,default:!0}},data:function(){return{dialogVisible:!1,resultDetail:{id:"",serial_number:"",module:"",step_id:"",name:"",result:"",env:"",log_id:"",duration:""}}},created:function(){this.dialogVisible=this.visible,this.init()},methods:{init:function(){var e=this,t=String.format("{0}/result/resultInfo?id={1}",this.GLOBAL.HTTPRUNNER_URL,this.resultId);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.resultDetail=t.data.detail,t}).catch(function(e){return e})},close:function(){this.$emit("listenToChildEvent")}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"result-dialog",attrs:{title:"详情",visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("执行流水号: ")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{clearable:""},model:{value:e.resultDetail.serial_number,callback:function(t){e.$set(e.resultDetail,"serial_number",t)},expression:"resultDetail.serial_number"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",[e._v("模块名称: ")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{clearable:""},model:{value:e.resultDetail.module,callback:function(t){e.$set(e.resultDetail,"module",t)},expression:"resultDetail.module"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("步骤id: ")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{clearable:""},model:{value:e.resultDetail.step_id,callback:function(t){e.$set(e.resultDetail,"step_id",t)},expression:"resultDetail.step_id"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("span",[e._v("步骤名称: ")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:2}},[a("el-input",{attrs:{clearable:""},model:{value:e.resultDetail.name,callback:function(t){e.$set(e.resultDetail,"name",t)},expression:"resultDetail.name"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("执行结果: ")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:1}},[a("el-input",{attrs:{clearable:""},model:{value:e.resultDetail.result,callback:function(t){e.$set(e.resultDetail,"result",t)},expression:"resultDetail.result"}})],1),e._v(" "),a("el-col",{attrs:{span:3,push:1}},[a("span",[e._v("所属环境: ")])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{clearable:""},model:{value:e.resultDetail.env,callback:function(t){e.$set(e.resultDetail,"env",t)},expression:"resultDetail.env"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("日志id: ")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:1}},[a("el-input",{attrs:{clearable:""},model:{value:e.resultDetail.log_id,callback:function(t){e.$set(e.resultDetail,"log_id",t)},expression:"resultDetail.log_id"}})],1),e._v(" "),a("el-col",{attrs:{span:3,push:1}},[a("span",[e._v("执行耗时:")])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{clearable:""},model:{value:e.resultDetail.duration,callback:function(t){e.$set(e.resultDetail,"duration",t)},expression:"resultDetail.duration"}})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")])],1)])},staticRenderFns:[]};var q={name:"ResultTable",components:{ResultDialog:a("VU/8")(z,I,!1,function(e){a("6rZZ")},"data-v-b5d88c02",null).exports},props:{tabData:null,tabHeader:null},data:function(){return{dialogVisible:!1,resultId:null,resultDialogType:2,loading:!1}},methods:{initRef:function(e){return String.format("/httpRunnerTest/httpRunner?activeName=stepModule&id={0}",e)},tableRowClassName:function(e){e.row;return e.rowIndex%2==0?"warning-row":"success-row"},detailClick:function(e){this.resultId=e,this.dialogVisible=!0},callbackFunc:function(){this.dialogVisible=!1}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"-10px"},attrs:{"element-loading-text":"拼命执行中,请稍等,若一直无响应,30秒后自动关闭～～～","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.tabData,border:"",size:"mini","row-class-name":e.tableRowClassName,width:"100%"}},[e._l(e.tabHeader,function(t,l){return["action"===t.prop?a("el-table-column",{key:l.id,attrs:{label:t.label,align:"center","show-overflow-tooltip":"",width:"300px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.detailClick(e.tabData[t.$index].id)}}},[e._v("详情\n          ")])]}}],null,!0)}):"step_id"===t.prop?a("el-table-column",{key:l.id,attrs:{label:t.label,align:"center","show-overflow-tooltip":"",width:"250px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:e.initRef(e.tabData[t.$index].step_id),target:"_blank"}},[e._v(e._s(e.tabData[t.$index].step_id))])]}}],null,!0)}):"id"===t.prop?a("el-table-column",{key:l.id,attrs:{prop:t.prop,label:t.label,align:"center","show-overflow-tooltip":"",fixed:"left",width:"120px"}}):"result"===t.prop?a("el-table-column",{key:l.id,attrs:{prop:t.prop,label:t.label,align:"center","show-overflow-tooltip":"",fixed:"left",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return["True"===e.tabData[t.$index].result?a("span",[a("font",{attrs:{color:"green"}},[e._v("成功")])],1):a("span",[a("font",{attrs:{color:"red"}},[e._v("失败")])],1)]}}],null,!0)}):a("el-table-column",{key:l,attrs:{prop:t.prop,label:t.label,align:"center","show-overflow-tooltip":""}})]})],2),e._v(" "),e.dialogVisible?a("result-dialog",{attrs:{visible:e.dialogVisible,"result-id":e.resultId},on:{listenToChildEvent:e.callbackFunc}}):e._e()],1)},staticRenderFns:[]};var U={name:"ResultList",components:{ResultTable:a("VU/8")(q,E,!1,function(e){a("cLsN")},"data-v-789fa967",null).exports},data:function(){return{serialNumber:"",module:"",stepId:"",stepName:"",status:"",env:"",total:0,pageSize:10,currentPage:1,dialogVisible:!1,moduleList:[],statusList:[],envList:[],tableData:[],tableHeader:[],timeRange:[]}},methods:{isEmpty:function(e){return void 0===e||""===e},reset:function(){this.initConditions(),this.getConditions(),this.getResultList()},initConditions:function(){this.serialNumber="",this.module="",this.stepId="",this.stepName="",this.status="",this.env="",this.timeRange=[],this.pageSize=10,this.currentPage=1},getConditions:function(){var e=this;this.moduleList=[],this.envList=[],this.statusList=[];var t=String.format("{0}/condition/moduleList",this.GLOBAL.HTTPRUNNER_URL),a=String.format("{0}/condition/envList",this.GLOBAL.HTTPRUNNER_URL),l=String.format("{0}/condition/statusList",this.GLOBAL.HTTPRUNNER_URL);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.moduleList=t.data.module_list,t}).catch(function(e){return e}),this.axios.get(a).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.envList=t.data.env_list,t}).catch(function(e){return e}),this.axios.get(l).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.statusList=t.data.status_list,t}).catch(function(e){return e})},getResultList:function(){var e=this,t="",a="";null!=this.timeRange&&this.timeRange.length>0&&(t=this.timeRange[0],a=this.timeRange[1]);var l=String.format("{0}/result/resultList",this.GLOBAL.HTTPRUNNER_URL),i={serial_number:this.serialNumber,module:this.module,step_id:this.stepId,name:this.stepName,result:this.status,env:this.env,start_time:t,end_time:a,page_index:this.currentPage};this.axios.post(l,n()(i),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){"200"!==t.data.code&&e.$message.error(t.data.msg),e.total=t.data.total;var a=t.data.resultInfo;return e.tableHeader=a.tableHeader,e.tableData=a.tableData,t}).catch(function(e){return e})},search:function(){this.currentPage=1,this.getResultList()},init:function(){this.getConditions(),this.getResultList()}},beforeMount:function(){this.init()}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-row",{staticStyle:{"margin-top":"-10px"},attrs:{gutter:40}},[a("el-col",{attrs:{span:2}},[a("span",[e._v("执行流水号")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"输入执行流水号",clearable:"",size:"mini"},model:{value:e.serialNumber,callback:function(t){e.serialNumber=t},expression:"serialNumber"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",[e._v("模块名称")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.module,callback:function(t){e.module=t},expression:"module"}},e._l(e.moduleList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:2,push:1}},[a("span",[e._v("步骤id")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"输入步骤id",clearable:"",size:"mini"},model:{value:e.stepId,callback:function(t){e.stepId=t},expression:"stepId"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",[e._v("步骤名称")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"输入步骤名称",clearable:"",size:"mini"},model:{value:e.stepName,callback:function(t){e.stepName=t},expression:"stepName"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"-10px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("执行结果")])]),e._v(" "),a("el-col",{attrs:{span:2,pull:1}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v("所属环境")])]),e._v(" "),a("el-col",{attrs:{span:2,pull:1}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.env,callback:function(t){e.env=t},expression:"env"}},e._l(e.envList,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v("执行日期")])]),e._v(" "),a("el-col",{attrs:{span:8,pull:1}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1),e._v(" "),a("el-col",{staticStyle:{float:"right"},attrs:{span:3}},[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:e.search}},[e._v("查询\n        ")]),e._v(" "),a("el-button",{attrs:{type:"info",round:"",size:"mini"},on:{click:e.reset}},[e._v("重置\n        ")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("result-table",{attrs:{tabData:e.tableData,tabHeader:e.tableHeader}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,slot, prev, pager, next, jumper",total:e.total,size:"mini"},on:{"current-change":e.getResultList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}},[a("span",[e._v(e._s(e.pageSize)+"条/页")])])],1)},staticRenderFns:[]};var H={name:"ResultTrendChart",data:function(){return{moduleList:[],module:"",envList:[],env:"",name:"",serialNumber:"",stepId:"",timeRange:[],pickerOptions:this.GLOBAL.pickerOptions,chart:{credits:{text:""},yAxis:{title:{text:"成功、失败数（条）：成功率（%）"}},title:{text:"结果趋势图"},xAxis:{categories:[]},plotOptions:{series:{stacking:"normal"}},labels:{items:[{html:"成功/失败占比",style:{left:"0px",top:"-40px",color:this.Highcharts.theme&&this.Highcharts.theme.textColor||"black"}}]},series:[{type:"column",name:"成功",tooltip:{valueSuffix:" 条"},data:[]},{type:"column",name:"失败",tooltip:{valueSuffix:" 条"},data:[]},{type:"spline",name:"成功率",tooltip:{valueSuffix:" %"},data:[],marker:{lineWidth:2,lineColor:this.Highcharts.getOptions().colors[3],fillColor:"white"}},{type:"pie",name:"数量",data:[["成功",0],["失败",0]],center:[20,10],size:100,showInLegend:!1,dataLabels:{enabled:!1}}]}}},methods:{reset:function(){this.initConditions(),this.getConditions(),this.getValue()},searchForTab:function(){this.getValue()},initConditions:function(){this.module="",this.serialNumber="",this.stepId="",this.name="",this.result="",this.env="",this.timeRange=[]},getConditions:function(){var e=this,t=String.format("{0}/condition/moduleList",this.GLOBAL.HTTPRUNNER_URL),a=String.format("{0}/condition/envList",this.GLOBAL.HTTPRUNNER_URL);this.axios.get(t).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.moduleList=t.data.module_list,t}).catch(function(e){return e}),this.axios.get(a).then(function(t){return"200"!==t.data.code&&e.$message.error(t.data.msg),e.envList=t.data.env_list,t}).catch(function(e){return e})},getValue:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中，请稍后~~~",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a="",l="";null!=this.timeRange&&this.timeRange.length>0&&(a=this.timeRange[0],l=this.timeRange[1]);var i=String.format("{0}/result/resultPic",this.GLOBAL.HTTPRUNNER_URL),s={start_date:a,end_date:l,serial_number:this.serialNumber,module:this.module,step_id:this.stepId,name:this.name,env:this.env};this.axios.post(i,n()(s),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(a){return"200"!==a.data.code&&e.$message.error(a.data.msg),e.chart.xAxis.categories=a.data.date_list,e.chart.series[0].data=a.data.success_data,e.chart.series[1].data=a.data.fail_data,e.chart.series[2].data=a.data.success_rate,e.chart.series[3].data=a.data.pie_data,e.Highcharts.chart("trendChart",e.chart),t.close(),a}).catch(function(e){return t.close(),e})},init:function(){this.getConditions(),this.getValue()},getWeek:function(e){var t=new Date,a=t.getTime()-864e5*e;t.setTime(a);var l=t.getFullYear(),i=t.getMonth(),s=t.getDate();return l+"-"+(i=this.doHandleMonth(i+1))+"-"+(s=this.doHandleMonth(s))},doHandleMonth:function(e){var t=e;return 1===e.toString().length&&(t="0"+e),t}},beforeMount:function(){this.timeRange=[this.getWeek(7),this.getWeek(0)]}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-row",{staticStyle:{"margin-top":"-10px"}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("所属模块")])]),e._v(" "),a("el-col",{attrs:{span:3,pull:1}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择模块",clearable:"",size:"mini"},model:{value:e.module,callback:function(t){e.module=t},expression:"module"}},e._l(e.moduleList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v("执行流水号")])]),e._v(" "),a("el-col",{attrs:{span:3,pull:1}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入流水号",clearable:""},model:{value:e.serialNumber,callback:function(t){e.serialNumber=t},expression:"serialNumber"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v("步骤id")])]),e._v(" "),a("el-col",{attrs:{span:3,pull:2}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入步骤id",clearable:""},model:{value:e.stepId,callback:function(t){e.stepId=t},expression:"stepId"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",[e._v("步骤名称")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入步骤名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"0px"}},[a("el-col",{attrs:{span:3}},[a("span",[e._v("所属环境")])]),e._v(" "),a("el-col",{attrs:{span:4,pull:1}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",size:"mini"},model:{value:e.env,callback:function(t){e.env=t},expression:"env"}},e._l(e.envList,function(e){return a("el-option",{key:e.index,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:2,pull:1}},[a("span",[e._v("日   期")])]),e._v(" "),a("el-col",{attrs:{span:4,pull:1}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd",size:"mini"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1),e._v(" "),a("el-col",{attrs:{span:4,push:1}},[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:e.getValue}},[e._v("查询\n        ")]),e._v(" "),a("el-button",{attrs:{type:"info",round:"",size:"mini"},on:{click:e.reset}},[e._v("重置\n        ")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{"border-style":"solid","border-width":"1px","margin-bottom":"20px","background-color":"#fff","border-color":"#ebeef5","margin-top":"30px"},attrs:{id:"trendChart"}})])},staticRenderFns:[]};var P={name:"HttpRunner",components:{RequestList:m,StepList:x,TestCaseList:$,ResultList:a("VU/8")(U,V,!1,function(e){a("b02f")},"data-v-dcac63d6",null).exports,ResultTrendChart:a("VU/8")(H,M,!1,function(e){a("0vYM")},"data-v-82745e10",null).exports},data:function(){return{activeName:"caseModule",id:""}},methods:{switchTab:function(){"requestModule"===this.activeName?this.$refs.requestModule.init():"stepModule"===this.activeName?this.$refs.stepModule.init():"caseModule"===this.activeName?this.$refs.caseModule.init():"resultModule"===this.activeName?this.$refs.resultModule.init():"chartModule"===this.activeName&&this.$refs.chartModule.init()}},beforeMount:function(){var e=this.$route.query;i()(e).length>0&&(this.activeName=e.activeName,this.id=e.id)}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.switchTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"请求管理",name:"requestModule"}},[a("request-list",{ref:"requestModule",attrs:{"request-id-from-list":e.id}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"步骤管理",name:"stepModule"}},[a("step-list",{ref:"stepModule",attrs:{"step-id-from-list":e.id}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"用例管理",name:"caseModule"}},[a("test-case-list",{ref:"caseModule"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"执行结果",name:"resultModule"}},[a("result-list",{ref:"resultModule"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"结果趋势图",name:"chartModule"}},[a("result-trend-chart",{ref:"chartModule"})],1)],1)],1)},staticRenderFns:[]};var F=a("VU/8")(P,O,!1,function(e){a("W1UJ")},"data-v-3e66e8ce",null);t.default=F.exports},EXVm:function(e,t){},N0aE:function(e,t){},NM1Q:function(e,t){},W1UJ:function(e,t){},b02f:function(e,t){},cLsN:function(e,t){}});
//# sourceMappingURL=3.264871b40d9ad164b086.js.map