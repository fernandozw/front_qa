webpackJsonp([9],{DhEt:function(t,e){},Go4P:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("mvHQ"),i=a.n(l),s={name:"Step",components:{StepDialog:a("OKnc").a},data:function(){return{dialogVisibleType:1,stepId:null,dialogVisible:!1,searchForm:{ids:"",stepName:"",elementId:"",status:"",startTime:[],updateTime:[]},statusList:[],statusMap:[],elementList:[],tableData:[],currentPage:1,pageSize:10,total:0}},methods:{tableRowClassName:function(t){t.row;return t.rowIndex%2==0?"warning-row":"success-row"},getStepList:function(t){var e=this;"reset"===t?(this.currentPage=1,this.resetSearchForm()):"normal"===t&&(this.currentPage=1);var a=String.format("{0}/step/steps",this.GLOBAL.WEBUI_URL);this.searchForm.pageNum=this.currentPage,this.axios.post(a,i()(this.searchForm),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){return e.tableData=t.data.data.steps,e.total=t.data.data.total,t}).catch(function(t){return t})},callbackFunc:function(t){this.dialogVisible=!1,t&&this.getStepList("normal")},clickAddBtn:function(){this.dialogVisibleType=1,this.dialogVisible=!0},stepDetail:function(t,e){"edit"===e?this.dialogVisibleType=2:"copy"===e&&(this.dialogVisibleType=3),this.stepId=t,this.dialogVisible=!0},deleteStep:function(t){var e=this;this.$confirm(String.format("此操作将永久删除该步骤(id:{0}), 是否继续?",t),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=String.format("{0}/step/delete",e.GLOBAL.WEBUI_URL),l={id:t};e.axios.post(a,i()(l),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){return"1000"===t.data.code?(e.Message.success(t.data.msg),e.getStepList("normal")):(e.Message.error(t.data.msg),e.getStepList("normal")),t}).catch(function(t){return t})})},getConditions:function(){var t=this,e=String.format("{0}/step/getSearchCondition",this.GLOBAL.WEBUI_URL);this.axios.get(e).then(function(e){return t.statusList=e.data.data.statusList,t.statusMap=e.data.data.statusMap,t.elementList=e.data.data.elementList,e}).catch(function(t){return t})},resetSearchForm:function(){this.searchForm={ids:"",stepName:"",elementId:"",status:"",startTime:[],updateTime:[]}}},beforeMount:function(){this.getConditions(),this.getStepList()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{attrs:{inline:!0,model:t.searchForm,size:"mini"}},[a("el-form-item",{attrs:{label:"id"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"支持多个id查询,以','分割",clearable:""},model:{value:t.searchForm.ids,callback:function(e){t.$set(t.searchForm,"ids",e)},expression:"searchForm.ids"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"步骤名称"}},[a("el-input",{attrs:{placeholder:"输入步骤名称",clearable:""},model:{value:t.searchForm.stepName,callback:function(e){t.$set(t.searchForm,"stepName",e)},expression:"searchForm.stepName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属元素"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:t.searchForm.elementId,callback:function(e){t.$set(t.searchForm,"elementId",e)},expression:"searchForm.elementId"}},t._l(t.elementList,function(t){return a("el-option",{key:t.id,attrs:{label:"「"+t.id+"」"+t.elementName,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"是否启用"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},t._l(t.statusList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"360px"},attrs:{type:"datetimerange",align:"right","start-placeholder":"起始时间","end-placeholder":"截止时间","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.searchForm.startTime,callback:function(e){t.$set(t.searchForm,"startTime",e)},expression:"searchForm.startTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("el-date-picker",{staticStyle:{width:"360px"},attrs:{type:"datetimerange",align:"right","start-placeholder":"起始时间","end-placeholder":"截止时间","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.searchForm.updateTime,callback:function(e){t.$set(t.searchForm,"updateTime",e)},expression:"searchForm.updateTime"}})],1),t._v(" "),a("el-form-item",{staticStyle:{float:"right","margin-right":"60px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getStepList("search")}}},[t._v("查询\n      ")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.clickAddBtn}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){return t.getStepList("reset")}}},[t._v("重置")])],1)],1),t._v(" "),t.dialogVisible?a("step-dialog",{attrs:{visible:t.dialogVisible,"step-id":t.stepId,type:t.dialogVisibleType},on:{listenToChildEvent:t.callbackFunc}}):t._e(),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,size:"mini",border:"","cell-style":{"text-align":"center"},"header-cell-style":{"text-align":"center"},"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{fixed:"left",prop:"id",label:"id",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"stepName",label:"步骤名称",width:"250","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"elementId",label:"所属元素",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n          「"+t._s(t.tableData[e.$index].elementId)+"」"+t._s(t.tableData[e.$index].elementName)+"\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"action",label:"操作类型",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"actionValue",label:"随操作值",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"function",label:"外部函数",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"是否启用",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.statusMap[t.tableData[e.$index].status]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"verifyAction",label:"校验类型",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"verifyValue",label:"随校验值",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"paramKey",label:"保存参数",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"addTime",label:"创建时间",width:"250","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"250","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.stepDetail(t.tableData[e.$index].id,"edit")}}},[t._v("编辑\n        ")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.deleteStep(t.tableData[e.$index].id)}}},[t._v("删除\n        ")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.stepDetail(t.tableData[e.$index].id,"copy")}}},[t._v("复制\n        ")])]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total,slot, prev, pager, next, jumper",total:t.total,size:"mini"},on:{"current-change":function(e){return t.getStepList("search")},"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}},[a("span",[t._v(t._s(t.pageSize)+"条/页")])])],1)},staticRenderFns:[]};var o=a("VU/8")(s,n,!1,function(t){a("DhEt")},"data-v-bd710566",null);e.default=o.exports},NZqp:function(t,e){},OKnc:function(t,e,a){"use strict";var l=a("mvHQ"),i=a.n(l),s={name:"StepDialog",components:{noticeDialog:a("6Bmd").a},props:{stepId:{type:Number,default:null},type:{type:Number,default:1},visible:{type:Boolean,default:!0}},data:function(){return{noticeVisible:!1,dialogVisible:!0,stepDetail:{stepName:"",elementId:"",action:"",actionValue:"",function:"",status:"",verifyAction:"",verifyValue:"",paramKey:""},actionList:[],actionParamMap:{},pageList:[],verifyList:[],verifyMap:{},statusList:[],statusMap:{},elementList:[]}},methods:{clickNotice:function(){this.noticeVisible=!0},callbackFunc:function(){this.noticeVisible=!1},changeVerifyAction:function(){this.stepDetail.verifyValue=""},changeAction:function(){this.stepDetail.actionValue="",this.stepDetail.paramKey=""},saveStep:function(){var t=this,e=String.format(2===this.type?"{0}/step/update":"{0}/step/add",this.GLOBAL.WEBUI_URL);this.axios.post(e,i()(this.stepDetail),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){return"1000"===e.data.code?(t.Message.success(e.data.msg),t.$emit("listenToChildEvent",!0)):t.Message.error(e.data.msg),e}).catch(function(t){return t})},changeForPage:function(t){var e=this;this.stepDetail.elementId="",this.elementList=[];var a=String.format("{0}//element/getElementByPageId?pageId={1}",this.GLOBAL.WEBUI_URL,t);this.axios.get(a).then(function(t){return e.elementList=t.data.data,t}).catch(function(t){return t})},close:function(){this.$emit("listenToChildEvent",!1)},getConditions:function(){var t=this,e=String.format("{0}/step/getSearchCondition",this.GLOBAL.WEBUI_URL);this.axios.get(e).then(function(e){return t.actionList=e.data.data.actionList,t.actionParamMap=e.data.data.actionParamMap,t.pageList=e.data.data.pageList,t.verifyList=e.data.data.verifyList,t.verifyMap=e.data.data.verifyMap,t.statusList=e.data.data.statusList,t.statusMap=e.data.data.statusMap,e}).catch(function(t){return t})},detail:function(){var t=this,e=String.format("{0}/step/getStepDetailById?id={1}",this.GLOBAL.WEBUI_URL,this.stepId);this.axios.get(e).then(function(e){return t.stepDetail=e.data.data.step,t.elementList=e.data.data.elementList,t.getConditions(),e}).catch(function(t){return t})}},computed:{dialogTitle:function(){return 2===this.type?"编辑（步骤ID："+this.stepId+"）":3===this.type?"复制":"新增"},btnText:function(){return 3===this.type?"复 制":"保 存"},typeText:function(){return 2===this.type?"编辑":3===this.type?"复制":"新增"}},created:function(){this.dialogVisible=this.visible,1===this.type?this.getConditions():2!==this.type&&3!==this.type||this.detail()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"step-dialog",attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"80%",id:"stepDialog"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close}},[a("div",[a("el-button",{staticStyle:{"margin-top":"0px"},attrs:{type:"text",size:"mini"},on:{click:t.clickNotice}},[t._v("内置参数说明\n      ")]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("el-form",{attrs:{inline:!0,model:t.stepDetail,size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"步骤名称:"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:t.stepDetail.stepName,callback:function(e){t.$set(t.stepDetail,"stepName",e)},expression:"stepDetail.stepName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属业务:"}},[a("el-select",{attrs:{placeholder:"必填项:请选择",clearable:"",filterable:""},on:{change:function(e){return t.changeForPage(t.stepDetail.pageId)}},model:{value:t.stepDetail.pageId,callback:function(e){t.$set(t.stepDetail,"pageId",e)},expression:"stepDetail.pageId"}},t._l(t.pageList,function(t){return a("el-option",{key:t.id,attrs:{label:t.pageName,value:t.id}})}),1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属元素:"}},[a("el-select",{attrs:{placeholder:"必填项:请选择",clearable:"",filterable:""},model:{value:t.stepDetail.elementId,callback:function(e){t.$set(t.stepDetail,"elementId",e)},expression:"stepDetail.elementId"}},t._l(t.elementList,function(t){return a("el-option",{key:t.id,attrs:{label:t.elementName,value:t.id}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作类型:"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择操作类型",clearable:""},on:{change:t.changeAction},model:{value:t.stepDetail.action,callback:function(e){t.$set(t.stepDetail,"action",e)},expression:"stepDetail.action"}},t._l(t.actionList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.value))])])}),1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"外部函数:"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",clearable:""},model:{value:t.stepDetail.function,callback:function(e){t.$set(t.stepDetail,"function",e)},expression:"stepDetail.function"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"随操作值:"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",clearable:""},model:{value:t.stepDetail.actionValue,callback:function(e){t.$set(t.stepDetail,"actionValue",e)},expression:"stepDetail.actionValue"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"校验类型:"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择校验类型",clearable:""},on:{change:t.changeVerifyAction},model:{value:t.stepDetail.verifyAction,callback:function(e){t.$set(t.stepDetail,"verifyAction",e)},expression:"stepDetail.verifyAction"}},t._l(t.verifyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.value))])])}),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否启用:"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:t.stepDetail.status,callback:function(e){t.$set(t.stepDetail,"status",e)},expression:"stepDetail.status"}},t._l(t.statusList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"随校验值:"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",clearable:""},model:{value:t.stepDetail.verifyValue,callback:function(e){t.$set(t.stepDetail,"verifyValue",e)},expression:"stepDetail.verifyValue"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"保存参数:"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",clearable:"",disabled:"sendKeys"!==t.stepDetail.action},model:{value:t.stepDetail.paramKey,callback:function(e){t.$set(t.stepDetail,"paramKey",e)},expression:"stepDetail.paramKey"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:t.close}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.saveStep}},[t._v("\n        "+t._s(t.btnText)+"\n      ")])],1)]),t._v(" "),t.noticeVisible?a("notice-dialog",{attrs:{notice:t.noticeVisible},on:{listenToChildEvent:t.callbackFunc}}):t._e()],1)},staticRenderFns:[]};var o=a("VU/8")(s,n,!1,function(t){a("NZqp")},"data-v-14de25bc",null);e.a=o.exports}});
//# sourceMappingURL=9.1673acf20cd6d8c00ec6.js.map