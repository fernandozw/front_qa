webpackJsonp([20],{Sugr:function(e,t){},YJ0z:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),o=i.n(a),n=i("Xxa5"),r=i.n(n),s=i("exGp"),l=i.n(s),c=i("Dd8w"),d=i.n(c),u=i("54Nt"),m=i("nAX2"),f={name:"ProjectConfig",data:function(){return{editForm:{},addForm:{},addProjectDialog:!1,editProjectDialog:!1,currentPage:1,conditionDict:{},pageSize:10,pageSizes:[5,10,20],total:0,tableData:[],rules:{name:[{required:!0,message:"项目名称不能为空"}]},editRules:{name:[{required:!0,message:"项目名称不能为空"}]}}},beforeMount:function(){this.getListByCondition()},methods:{closeAddDialog:function(){this.addProjectDialog=!1,this.$refs.addForm.resetFields()},closeEditDialog:function(){this.editProjectDialog=!1,this.$refs.editForm.resetFields()},addProject:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var i=u.f.add;i.param=d()({},i.param,t.addForm),Object(m.a)(t.GLOBAL.BASE_URL,i).then(function(e){"1000"===e.code?(t.closeAddDialog(),t.$message.success("新增成功！"),t.getListByCondition("search")):t.$message.error(e.msg)})}})},getProject:function(e){var t=this;this.editProjectDialog=!0;var i=u.f.getProject;i.param.id=e,Object(m.a)(this.GLOBAL.BASE_URL,i).then(function(e){t.editForm=e.data})},deleteProject:function(e){var t=this;return l()(r.a.mark(function i(){var a,o;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:"confirm"===i.sent&&(a=u.f.delete,o={id:e},a.param=d()({},a.param,o),Object(m.a)(t.GLOBAL.BASE_URL,a).then(function(e){"1000"===e.code?(t.$message.success(e.msg),t.getListByCondition("search")):t.$message.error(e.msg)}));case 4:case"end":return i.stop()}},i,t)}))()},editProject:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var i=u.f.update;i.param=d()({},i.param,t.editForm),Object(m.a)(t.GLOBAL.BASE_URL,i).then(function(e){"1000"===e.code?(t.closeEditDialog(),t.$message.success("编辑成功！"),t.getListByCondition("search")):t.$message.error(e.msg)})}})},getListByCondition:function(e){var t=this;"search"===e&&(this.currentPage=1);var i=JSON.parse(o()(u.f.projectList));this.conditionDict.pageSize=this.pageSize,this.conditionDict.pageNum=this.currentPage,i.param=d()({},i.param,this.conditionDict),Object(m.a)(this.GLOBAL.BASE_URL,i).then(function(e){t.tableData=e.data.projectList,t.total=e.data.total})},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.getListByCondition()},tableRowClassName:function(e){e.row;return e.rowIndex%2==0?"warning-row":"success-row"},getHeaderClass:function(e){return 0===e.rowIndex?"background:deepskyblue":""}}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{staticClass:"demo-form-inline",attrs:{model:e.conditionDict,inline:!0}},[i("el-form-item",{attrs:{label:"项目id:"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入项目id",clearable:""},model:{value:e.conditionDict.id,callback:function(t){e.$set(e.conditionDict,"id",t)},expression:"conditionDict.id"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"项目名称:"}},[i("el-input",{attrs:{size:"mini",placeholder:"输入项目名称",clearable:""},model:{value:e.conditionDict.name,callback:function(t){e.$set(e.conditionDict,"name",t)},expression:"conditionDict.name"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getListByCondition("search")}}},[e._v("查询")]),e._v(" "),i("el-button",{attrs:{type:"success",round:"",size:"mini"},on:{click:function(t){e.addProjectDialog=!0}}},[e._v("新增\n      ")])],1)],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName,"header-cell-style":e.getHeaderClass,border:"",size:"mini"}},[i("el-table-column",{attrs:{fixed:"",prop:"id",label:"id",align:"center","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{fixed:"",prop:"name",label:"名称",align:"center","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",align:"center","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.getProject(t.row.id)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.deleteProject(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.getListByCondition}}),e._v(" "),i("el-dialog",{attrs:{visible:e.addProjectDialog,"before-close":e.closeAddDialog,title:"新增",width:"60%"},on:{"update:visible":function(t){e.addProjectDialog=t}}},[i("el-card",[i("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,inline:!0}},[i("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入项目名称",size:"mini",clearable:""},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.closeAddDialog}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addProject("addForm")}}},[e._v("保 存\n      ")])],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.editProjectDialog,"before-close":e.closeEditDialog,title:"编辑",width:"60%"},on:{"update:visible":function(t){e.editProjectDialog=t}}},[i("el-card",[i("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRules,inline:!0}},[i("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入项目名称",size:"mini",clearable:""},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.closeEditDialog}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.editProject("editForm")}}},[e._v("保 存\n      ")])],1)],1)],1)},staticRenderFns:[]};var p=i("VU/8")(f,g,!1,function(e){i("Sugr")},"data-v-1593ad0a",null);t.default=p.exports}});
//# sourceMappingURL=20.c32dbfe3a0ed2ef61bcf.js.map