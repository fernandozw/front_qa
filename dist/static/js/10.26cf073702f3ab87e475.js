webpackJsonp([10],{"68Xx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),i=a.n(l),n={name:"Element",components:{elementDialog:a("PBq9").a},data:function(){return{dialogVisibleType:1,elementId:null,dialogVisible:!1,searchForm:{id:"",elementName:"",iframe:"",locateType:"",keyword:"",pageId:"",startTime:[],updateTime:[]},locateList:[],pageList:[],tableData:[],currentPage:1,pageSize:10,total:0}},methods:{tableRowClassName:function(e){e.row;return e.rowIndex%2==0?"warning-row":"success-row"},getElementList:function(e){var t=this;"reset"===e?(this.currentPage=1,this.resetSearchForm()):"normal"===e&&(this.currentPage=1);var a=String.format("{0}/element/elements",this.GLOBAL.WEBUI_URL);this.searchForm.pageNum=this.currentPage,this.axios.post(a,i()(this.searchForm),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){return t.tableData=e.data.data.elements,t.total=e.data.data.total,e}).catch(function(e){return e})},callbackFunc:function(e){this.dialogVisible=!1,e&&this.getElementList("normal")},clickAddBtn:function(){this.dialogVisibleType=1,this.dialogVisible=!0},elementDetail:function(e,t){"edit"===t?this.dialogVisibleType=2:"copy"===t&&(this.dialogVisibleType=3),this.elementId=e,this.dialogVisible=!0},deleteElement:function(e){var t=this;this.$confirm(String.format("此操作将永久删除该元素(id:{0}), 是否继续?",e),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=String.format("{0}/element/delete",t.GLOBAL.WEBUI_URL),l={id:e};t.axios.post(a,i()(l),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){return"1000"===e.data.code?(t.Message.success(e.data.msg),t.getElementList("normal")):(t.Message.error(e.data.msg),t.getElementList("normal")),e}).catch(function(e){return e})})},getConditions:function(){var e=this,t=String.format("{0}/element/getSearchCondition",this.GLOBAL.WEBUI_URL);this.axios.get(t).then(function(t){return e.locateList=t.data.data.locateList,e.pageList=t.data.data.pageList,t}).catch(function(e){return e})},resetSearchForm:function(){this.searchForm={id:"",elementName:"",iframe:"",locateType:"",keyword:"",pageId:"",startTime:"",updateTime:""}}},beforeMount:function(){this.getConditions(),this.getElementList()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.searchForm,size:"mini"}},[a("el-form-item",{attrs:{label:"id"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"输入id",clearable:""},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元素名称"}},[a("el-input",{attrs:{placeholder:"输入元素名称",clearable:""},model:{value:e.searchForm.elementName,callback:function(t){e.$set(e.searchForm,"elementName",t)},expression:"searchForm.elementName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"iframe"}},[a("el-input",{attrs:{placeholder:"输入iframe",clearable:""},model:{value:e.searchForm.iframe,callback:function(t){e.$set(e.searchForm,"iframe",t)},expression:"searchForm.iframe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"定位方式"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择定位方式",clearable:""},model:{value:e.searchForm.locateType,callback:function(t){e.$set(e.searchForm,"locateType",t)},expression:"searchForm.locateType"}},e._l(e.locateList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{attrs:{placeholder:"输入关键字",clearable:""},model:{value:e.searchForm.keyword,callback:function(t){e.$set(e.searchForm,"keyword",t)},expression:"searchForm.keyword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属业务"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择所属业务",clearable:""},model:{value:e.searchForm.pageId,callback:function(t){e.$set(e.searchForm,"pageId",t)},expression:"searchForm.pageId"}},e._l(e.pageList,function(e){return a("el-option",{key:e.id,attrs:{label:"「"+e.id+"」"+e.pageName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"360px"},attrs:{type:"datetimerange",align:"right","start-placeholder":"起始时间","end-placeholder":"截止时间","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.searchForm.startTime,callback:function(t){e.$set(e.searchForm,"startTime",t)},expression:"searchForm.startTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("el-date-picker",{staticStyle:{width:"360px"},attrs:{type:"datetimerange",align:"right","start-placeholder":"起始时间","end-placeholder":"截止时间","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.searchForm.updateTime,callback:function(t){e.$set(e.searchForm,"updateTime",t)},expression:"searchForm.updateTime"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"right","margin-right":"60px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getElementList("search")}}},[e._v("查询\n      ")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.clickAddBtn}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.getElementList("reset")}}},[e._v("重置")])],1)],1),e._v(" "),e.dialogVisible?a("element-dialog",{attrs:{visible:e.dialogVisible,"element-id":e.elementId,type:e.dialogVisibleType},on:{listenToChildEvent:e.callbackFunc}}):e._e(),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"mini",border:"","cell-style":{"text-align":"center"},"header-cell-style":{"text-align":"center"},"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{fixed:"left",prop:"id",label:"id",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"elementName",label:"元素名称",width:"250","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"pageId",label:"所属业务",width:"180","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n          「"+e._s(e.tableData[t.$index].pageId)+"」"+e._s(e.tableData[t.$index].pageName)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"iframe",label:"iframe",width:"180","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"locateType",label:"定位方式",width:"180","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"keyword",label:"关键字",width:"180","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"addTime",label:"创建时间",width:"250","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"250","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.elementDetail(e.tableData[t.$index].id,"edit")}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.deleteElement(e.tableData[t.$index].id)}}},[e._v("删除\n        ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.elementDetail(e.tableData[t.$index].id,"copy")}}},[e._v("复制\n        ")])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,slot, prev, pager, next, jumper",total:e.total,size:"mini"},on:{"current-change":function(t){return e.getElementList("search")},"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}},[a("span",[e._v(e._s(e.pageSize)+"条/页")])])],1)},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(e){a("seYs")},"data-v-e0ef95ea",null);t.default=o.exports},PBq9:function(e,t,a){"use strict";var l=a("mvHQ"),i=a.n(l),n={name:"ElementDialog",props:{elementId:{type:Number,default:null},type:{type:Number,default:1},visible:{type:Boolean,default:!0}},data:function(){return{dialogVisible:!0,elementDetail:{elementName:"",iframe:"",locateType:"",keyword:"",pageId:""},locateList:[],pageList:[]}},methods:{saveElement:function(){var e=this,t=String.format(2===this.type?"{0}/element/update":"{0}/element/add",this.GLOBAL.WEBUI_URL);this.axios.post(t,i()(this.elementDetail),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){return"1000"===t.data.code?(e.Message.success(t.data.msg),e.$emit("listenToChildEvent",!0)):e.Message.error(t.data.msg),t}).catch(function(e){return e})},close:function(){this.$emit("listenToChildEvent",!1)},getConditions:function(){var e=this,t=String.format("{0}/element/getSearchCondition",this.GLOBAL.WEBUI_URL);this.axios.get(t).then(function(t){return e.locateList=t.data.data.locateList,e.pageList=t.data.data.pageList,t}).catch(function(e){return e})},detail:function(){var e=this,t=String.format("{0}/element/getElementById?id={1}",this.GLOBAL.WEBUI_URL,this.elementId);this.axios.get(t).then(function(t){return e.elementDetail=t.data.data,e.getConditions(),t}).catch(function(e){return e})}},computed:{dialogTitle:function(){return 2===this.type?"编辑（元素ID："+this.elementId+"）":3===this.type?"复制":"新增"},btnText:function(){return 3===this.type?"复 制":"保 存"},typeText:function(){return 2===this.type?"编辑":3===this.type?"复制":"新增"}},created:function(){this.dialogVisible=this.visible,1===this.type?this.getConditions():2!==this.type&&3!==this.type||this.detail()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"element-dialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"80%",id:"elementDialog"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[a("div",[a("el-card",{staticClass:"box-card"},[a("el-form",{attrs:{inline:!0,model:e.elementDetail,size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"元素名称:"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.elementDetail.elementName,callback:function(t){e.$set(e.elementDetail,"elementName",t)},expression:"elementDetail.elementName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"iframe:"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.elementDetail.iframe,callback:function(t){e.$set(e.elementDetail,"iframe",t)},expression:"elementDetail.iframe"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"定位方式:"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择定位方式",clearable:""},model:{value:e.elementDetail.locateType,callback:function(t){e.$set(e.elementDetail,"locateType",t)},expression:"elementDetail.locateType"}},e._l(e.locateList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"关键字:"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"必填项:请输入内容",clearable:""},model:{value:e.elementDetail.keyword,callback:function(t){e.$set(e.elementDetail,"keyword",t)},expression:"elementDetail.keyword"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属业务:"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择所属业务",clearable:""},model:{value:e.elementDetail.pageId,callback:function(t){e.$set(e.elementDetail,"pageId",t)},expression:"elementDetail.pageId"}},e._l(e.pageList,function(e){return a("el-option",{key:e.id,attrs:{label:"「"+e.id+"」"+e.pageName,value:e.id}})}),1)],1)],1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:e.close}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveElement}},[e._v("\n        "+e._s(e.btnText)+"\n      ")])],1)])],1)},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(e){a("PpZ9")},"data-v-51b6e6e6",null);t.a=o.exports},PpZ9:function(e,t){},seYs:function(e,t){}});
//# sourceMappingURL=10.26cf073702f3ab87e475.js.map